一、概念

    - 闭包是指有权访问另一个函数作用域中的变量的函数
    - 闭包的本质就是当前环境中存在指向父级作用域的引用

         例：function f1() {
			  var a = 2
			  function f2() {
			    console.log(a);//2
			  }
			  return f2;
			}
			var x = f1();
			
          - 上面函数如果只执行到这里是没有产生闭包的，因为当js引擎一进入程序的时候，就创建了一个全局执行上下文。然后在全局代码中又调用了函数f1()这时又产生了f1的函数执行上下文，由于没有调用f2函数，所以没有产生f2函数的执行上下文，所以当前环境指的是f1的作用域，所以当前环境中并没有对父级作用域的引用，所以没有产生闭包

          - 如果要产生闭包最后加一句 x()就可以了

二、原理

* 在一个函数内部定义的子函数会将其父函数的作用域添加到它的作用域链中，当父函数执行完毕之后，由于其子函数的作用域链依然在引用它的某些变量或函数，所以父函数的作用域不会被销毁

三、闭包的表现形式

 1.返回一个函数。刚刚已经举例。
 2.作为函数参数传递

    var a = 1;
	function foo(){
	  var a = 2;
	  function baz(){
	    console.log(a);
	  }
	  bar(baz);
	}
	function bar(fn){
	  // 这就是闭包
	  fn();
	}
	// 输出2，而不是1
	foo();

四、闭包的用途

* 可以读取内部函数的变量
* 让这些变量的值始终保存在内存中，不会被调用后就被垃圾回收机制收回
* 用来模块化代码（类块级作用域）

五、优点

* 可以将一个变量长期驻扎在内存中
* 避免全局变量的污染
* 私有成员的存在

六、缺点

* 会使函数的变量被保存在内存中，内存消耗极大，会造成网页性能问题，在IE中会导致内存泄漏
* 闭包会在父函数外部改变父函数内部变量的值。所以，如果把父函数当作对象使用，把闭包当作它的公用方法，把内部变量当作它的私有属性，注意不要随意改变父函数内部的值