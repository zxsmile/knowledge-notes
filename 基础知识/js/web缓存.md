---
title: web缓存
date: 2019-11-25 16:10:35
tags:
cover: /images/psb37.jpg
---

### 一、缓存

1.概念

* 缓存是指可以进行高速数据交换的存储器，它先于内存与CPU交换数据，因此速率很快

* 这个词来源于计算机硬件，由于CPU运算速度极快，而内存和硬盘的读写速度相对来说又特别慢，所以CPU每次有数据存取需要的时候，就要等待磁盘的缓慢操作，这对于CPU的性能是极大的浪费，所以为了快速响应CPU需求，需要有一个快速的存储设备来临时存放数据，这便是缓存

2.原理

* 缓存的工作原理是当CPU要读取一个数据时，首先从CPU缓存中查找，找到就立即读取并送给CPU处理；没有找到，就从速率相对较慢的内存中读取并送给CPU处理，同时把这个数据所在的数据块调入缓存中，可以使得以后对整块数据的读取都从缓存中进行，不必再调用内存。正是这样的读取机制使CPU读取缓存的命中率非常高（大多数CPU可达90%左右），也就是说CPU下一次要读取的数据90%都在CPU缓存中，只有大约10%需要从内存读取。这大大节省了CPU直接读取内存的时间，也使CPU读取数据时基本无需等待。总的来说，CPU读取数据的顺序是先缓存后内存

3.优点

* 减轻服务器压力
* 减少数据传输，节省网络带宽和流量
* 缩短页面加载时间，提升用户体验

### 二、web缓存

1.原理

* 客户端浏览器在显示一个完整网页前，需要去服务器获取一些必要的数据（js,css,image等），因为浏览器的数据处理和渲染速度很快，而通过网络传输的方式去服务器取数据的过程却很慢（虽然现在网速还算比较快，下载1M的文件都用不了1s，但相较于处理器，这就非常慢了），所以页面显示出来前都有一段时间的白屏，如果每次打开相同的页面，获取相同的资源都要等待一段时间的白屏，作为用户，岂能忍。如果把已经获取过的资源存在本地，下次用的时候就不用从服务器去取了，这样速度就要快很多了。这种机制便是web缓存

2.分类

* 数据库缓存
* 服务器端缓存（代理服务器缓存、CDN 缓存）
* 浏览器缓存

     * HTTP缓存
     * indexDB
     * cookie
     * localstorage 等等

3.详细讲解

(1)CDN缓存

CDN缓存一般是由网站管理员自己部署，为了让他们的网站更容易扩展并获得更好的性能。通常情况下，浏览器先向CDN网关发起Web请求，网关服务器后面对应着一台或多台负载均衡源服务器，会根据它们的负载请求，动态将请求转发到合适的源服务器上。从浏览器角度来看，整个CDN就是一个源服务器，从这个层面来说，浏览器和服务器之间的缓存机制，在这种架构下同样适用
https://www.cnblogs.com/echolun/p/9419517.html

(2)代理服务器缓存

代理服务器是浏览器和源服务器之间的中间服务器，浏览器先向这个中间服务器发起Web请求，经过处理后（比如权限验证，缓存匹配等），再将请求转发到源服务器。代理服务器缓存的运作原理跟浏览器的运作原理差不多，只是规模更大


https://zhuanlan.zhihu.com/p/90507417
