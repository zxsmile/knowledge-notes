### 一、js的内存 ###

#### 1. 背景

- 不管什样的编程语言，在代码的执行过程中都是需要给它分配内存的，不同的是某些编程语言需要我们自己手动的管理内存，某些编程语言会自动帮助我们管理内存。

- 而js它所具备的内存管理就是自动进行了，不对使用者开放。

- js的内存管理对我们来说，变成了黑盒一样的存在，一旦我们因为错的引用持有（例如闭包或全局变量），就会导致内存泄露。

#### 2. 认识内存管理

- 但不管以什么样的方式来管理内存，内存的管理都会有如下的生命周期：

  第一步：分配申请我们需要的内存（申请）；

  第二步：使用分配的内存（存放一些东西，比如对象等）；

  第三步：不需要使用时，对其进行释放；

  **全局变量一般不会回收（关闭页面回收）。一般情况下局部变量的值，不用了，会被自动回收。**

- 不同的编程语言对于第一步和第三步会有不同的实现：

  - 手动管理内存：比如C、C++，包括早期的OC，都是需要手动来管理内存的申请和释放的（malloc和free函数）；
    - 这种方式需要程序员手动管理内存，容易出现内存泄漏和野指针等问题，程序的稳定性和安全性有一定的风险。
  - 自动管理内存：比如Java、JavaScript、Python、Swift、Dart等，它们有自动帮助我们管理内存；
    -   在这些语言中，存在垃圾回收机制来自动回收不再使用的内存空间，程序员只需要正确地使用变量和对象等引用类型数据，垃圾回收器就会自动进行内存管理，释放不再被引用的内存空间。
    - 这种方式可以避免内存泄漏和野指针等问题，提高程序的稳定性和安全性 

- 对于开发者来说，JavaScript 的内存管理是自动的、无形的，也是抽象的

  （1）我们创建的原始值、对象、函数……这一切都会占用内存

  （2）好处在于我们并不需要手动来对它们进行管理，JavaScript引擎会帮助我们处理好它，但同样会带来一定的坏处(人为)：我们可能会忽略掉内存管理在其中的作用，导致相关理解产生偏差

#### 3. 在JavaScript的执行过程中，主要有三种类型的内存空间：代码空间、栈空间、堆空间

- 代码空间：用来存放可执行代码

- 栈空间：一块连续的内存区域，容量较小，读取速度快，被设计成先进后出结构

- 堆空间：不连续的内存区域，容量较大，用于储存大数据，读取速度慢