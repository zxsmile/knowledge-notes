# 一、`html` 自定义属性配合 `css` 的属性选择器

## `HTML`自定义属性：

在`HTML`中，可以使用自定义属性来存储额外的信息或数据，这些属性并不会影响文档的结构或样式，但可以通过`JavaScript`或`CSS`来访问和操作。自定义属性通常以`data-`开头，例如`data-color="red"`。
示例：

```html
<div data-color="red">This is a red box</div>
```

在`JavaScript`中，你可以使用`getAttribute()`方法来获取自定义属性的值：

```javascript
var color = document.querySelector('div').getAttribute('data-color');
console.log(color); // 输出 "red"
```

## `CSS`的属性选择器：

`CSS`属性选择器允许你根据元素的属性值来选择元素。常见的属性选择器包括：

- `[attribute]`: 选择具有指定属性的元素。
- `[attribute=value]`: 选择属性值等于特定值的元素。
- `[attribute~=value]`: 选择属性值包含特定词的元素。
- `[attribute|=value]`: 选择属性值以特定值开头（包括该值和后面的连字符）的元素。
- `[attribute^=value]`: 选择属性值以特定值开头的元素。
- `[attribute$=value]`: 选择属性值以特定值结尾的元素。
- `[attribute*=value]`: 选择属性值包含特定值的元素。

示例：

```css
/* 选择所有包含data-color属性的元素 */
[data-color] {
  color: blue;
}

/* 选择data-color值为"red"的元素 */
[data-color="red"] {
  color: red;
}
```

使用`CSS`属性选择器可以根据元素的自定义属性值来样式化元素，为页面的样式定制提供了更多灵活性和控制力。

## 前置知识

**`CSS`变量：**声明自定义`CSS`属性，它包含的值可以在整个文档中重复使用。属性名需要以两个减号（`--`）开始，属性值则可以是任何有效的 `CSS`值

```js
--fontColor:'#fff'
```

**`Var`函数：**用于使用`CSS`变量。第一个参数为`CSS`变量名称，第二个可选参数作为默认值

```js
color: var(--fontColor);
```

`CSS`属性选择器：匹配具有特定属性或属性值的元素。例如`[data-theme='black']`，将选择所有 `data-theme` 属性值为 `'black'` 的元素

## 实现一键换肤功能

还是在 `theme` 文件夹下面创建两个 `css` 文件。一个 `dark.css`,一个 `light.css`,然后在文件中分别写入对应主题下的样式

#### 定义不同肤色的`css`变量

```css
    --theme-color-dark: #141414;
    --header-primary-color-dark: #1a3750;
    --bg-content-default-dark: #1a3750;
    --bg-theme-default-dark: #13293b;
    --bg-left-color-dark: #27415a;

    --theme-color-light: #f4f4f4;
    --header-primary-color-light: #2670ff;
    --bg-content-default-light: #fff;
    --bg-theme-default-light: #f3f5f9;
    --bg-left-color-light: #eff3f4;
```

```css
[data-theme="dark"] {
    --bgColor:  var(--theme-color-dark);
}

[data-theme="light"] {
    --bgColor: var(--theme-color-light);
}
```

#### 然后把这两个样式文件分别引入到 `index.css` 根样式文件中

```css
@import "src/theme/dark.css";
@import "src/theme/light.css";

html, body {
    padding: 0;
    margin: 0;
    background: var(--bgColor);
}
```

然后在 `App.tsx` 也就是修改主题的地方去设置对应的 `html` 自定义属性即可达到换肤的效果了

#### 修改`CSS`主题色

监听`change`事件，使用`document.documentElement.setAttribute`动态修改`data-theme`属性，然后`CSS`属性选择器将自动选择对应的`css`变量

```js
<template>
  <div>
    <select name="pets" @change="handleChange">
      <option value="default">默认色</option>
      <option value="black">黑色</option>
    </select>
    <div>登录页面</div>
  </div>
</template>

<script setup lang="ts">
const handleChange = (e: Event) => {
  window.document.documentElement.setAttribute('data-theme', e.target.value);
};
</script>

<style lang="scss">
body {
  color: var(--font-primary);
  background-color: var(--background-main);
}
</style>
```

