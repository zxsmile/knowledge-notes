前端开发在金融领域（银行、证券、保险、支付、理财等）具有**极高的安全、合规与稳定性要求**，远超普通互联网应用。稍有疏忽，轻则用户体验受损，重则引发资金损失、监管处罚甚至法律风险。

以下是金融前端开发必须特别注意的 **8 大核心维度**，涵盖 **安全、合规、性能、体验、审计** 等关键方面：

#  一、数据安全：绝不让敏感信息“裸奔”

## 必须做到：

#### 禁止明文传输敏感数据

- 身份证号、银行卡号、手机号、交易密码等 **必须加密后传输**
- 前端使用 **`AES + RSA` 混合加密**（见下文）

#### 前端加密方案（典型流程）：

```
// 1. 从后端获取 RSA 公钥
const publicKey = await fetch('/api/public-key').then(r => r.text());

// 2. 生成随机 AES 密钥
const aesKey = CryptoJS.lib.WordArray.random(256/8).toString();

// 3. 用 AES 加密用户数据（如身份证）
const encryptedData = CryptoJS.AES.encrypt(
  JSON.stringify({ idCard: '110...' }),
  aesKey,
  { iv: iv, mode: CryptoJS.mode.CBC }
).toString();

// 4. 用 RSA 加密 AES 密钥
const encryptedKey = rsaEncrypt(aesKey, publicKey); // 使用 jsencrypt 或 Web Crypto API

// 5. 上传 { data: encryptedData, key: encryptedKey }
```

#### 内存中不留痕

- 敏感字段输入后立即清空变量
- 避免将原始数据存入 `Vuex/Pinia` 或 `localStorage`

#### 禁用自动填充 & 复制粘贴（可选但推荐）

```
<input 
  type="text" 
  autocomplete="off"
  oncopy="return false"
  onpaste="return false"
  oncut="return false"
/>
```

> ⚠️ 注意：**不要把加密密钥硬编码在前端！** 公钥可公开，私钥必须在服务端。

# 二、合规性要求：满足监管“硬指标”

## 1. 等保（等级保护）要求

- 页面需支持 **`HTTPS` 强制跳转**
- 禁用不安全协议（`TLS 1.0/1.1`）
- `CSP`（内容安全策略）防止 `XSS`

## 2. 个人信息保护法（`PIPL`） / `GDPR`

- 用户授权明确（“同意收集身份证用于实名认证”）
- 提供 **数据删除/导出入口**
- `Cookie` 使用需弹窗告知（尤其跨境业务）

## 3. 金融行业标准

- 《`JR/T 0223-2021` 移动金融客户端应用软件安全管理规范》
  - 禁止日志打印敏感信息
  - 禁止 `WebView` 明文存储密码
  - 应用退出时清除临时数据

# 三、 对抗黑产攻击的能力（高危场景）

金融是黑产重点目标，前端需具备 **主动防御能力**：

| 攻击类型                      | 普通行业应对 | 金融行业应对                                                 |
| ----------------------------- | ------------ | ------------------------------------------------------------ |
| **自动化脚本（抢购/薅羊毛）** | 限流即可     | **行为验证**（滑动拼图、点选文字）                           |
| **`XSS`**                     | 基础过滤     | 所有用户输入/接口返回内容经 `DOMPurify` 净化                 |
| **` CSRF`**                   | 基础过滤     | 请求头携带 `X-Requested-With` 或 `Token`（由后端校验）       |
| **调试破解**                  | 代码压缩     | 生产环境移除 `console`，代码混淆（`Webpack Terser`）         |
| **录屏/截屏窃取**             | 无要求       | 在 `WebView` 中设置 `FLAG_SECURE`（`Android`）或 `preventCapture`（`iOS`） |

> ✅ 金融 `App` 通常集成 **设备指纹 `SDK`**（如同盾、顶象），前端配合采集 `canvas`、`webgl`、字体等特征识别模拟器/群控设备。

# 四、性能与稳定性：不能“卡”更不能“崩”

### ✅ 关键指标（金融级）：

| 指标         | 要求                         |
| ------------ | ---------------------------- |
| 首屏加载     | ≤ `1.5s（4G）`，≤ `3s（3G）` |
| 交易操作响应 | ≤ `800ms`                    |
| 错误率       | < 0.1%                       |
| 崩溃率       | < 0.01%                      |

### 优化重点：

- **关键路径极致优化**：登录 → 首页 → 转账，每一步都要快
- **离线兜底**：网络失败时提示明确（“当前无网络，请检查后重试”）
- **防重复提交**：转账按钮点击后置灰 + `loading`，防止多次触发

###  **极致稳定性要求（不能容忍“小 `bug`”）**

| 指标           | 普通行业容忍度     | 金融行业要求             |
| -------------- | ------------------ | ------------------------ |
| **页面崩溃率** | < 1% 可接受        | **< 0.01%**（万分之一）  |
| **交易失败率** | < 5%               | **< 0.1%**               |
| **性能波动**   | “偶尔卡一下”可接受 | **关键路径必须稳定 ≤1s** |

> 💡 举例：
>
> - 电商购物车多刷新一次？影响不大。
> - 银行转账页面卡住？用户可能重复点击 → **重复扣款风险！**

# 五、用户体验：清晰、确定、无歧义

金融用户对“不确定性”极度敏感，`UI` 必须：

#### **操作可逆**：

- 大额转账前二次确认

#### 状态明确：

- “处理中” vs “成功” vs “失败” 图标+文字双重提示，“处理中” ≠ “成功”，需区分 `loading / success / fail`
- 失败原因具体（“余额不足”而非“操作失败”）

#### 数字格式规范：

- 金额：`¥1,234.56`（千分位 + 两位小数）
- 身份证：`110***********1234`（中间脱敏）

- **无障碍支持**：视障用户可通过读屏使用（`ARIA` 标签）

> 🌰 对比：
>
> - 社交 `App` 发错消息？撤回即可。
> - 转错账？可能无法追回 → **前端必须防错在先**

# 六、审计与日志：一切操作可追溯

#### 操作日志埋点：

- 用户点击“转账” → 记录时间、页面、操作类型
- 不记录敏感数据，只记行为（如“发起转账，金额区间：`1k~5k`”）

```
// ✅ 正确：记录行为，不记录数据
track('transfer_initiated', { amount_range: '1k-5k' });

// ❌ 错误：记录原始金额
track('transfer_initiated', { amount: 1234.56 });
```

#### 错误监控：

- 集成 `Sentry` / 自研监控，捕获 `JS Error`
- 关键路径（如支付）增加自定义性能埋点

#### 日志脱敏：

所有上报日志自动替换身份证、手机号为 `*`

```
// 错误上报前脱敏
const safeData = rawData.replace(/\d{18}/g, '********');
```

> 📌 普通行业：日志用于优化体验；金融行业：**日志用于事故定责 + 监管检查**

#  七、测试与发布：零容忍缺陷

#### 测试覆盖：

- 安全测试：`OWASP ZAP` 扫描
- 兼容性测试：覆盖低端机（如华为畅享、红米）
- 弱网测试：`2G/3G`、高丢包率场景

#### 发布流程：

- 灰度发布（先 1% 用户）
- 紧急回滚机制（5 分钟内）
- 上线前安全团队人工 `review`

| 环节         | 普通行业     | 金融行业                               |
| ------------ | ------------ | -------------------------------------- |
| **测试覆盖** | 核心路径覆盖 | **全路径 + 弱网 + 低端机 + 安全扫描**  |
| **上线流程** | 直接发布     | **灰度 → 小流量 → 全量，每步人工审批** |
| **回滚机制** | 可选         | **必须 5 分钟内回滚**                  |
| **代码审查** | 团队内部     | **安全团队 + 合规团队双重 `review`**   |

> 💡 金融项目常要求 **“双人复核”**：一人写代码，另一人 `review` 安全逻辑。

# 八、技术选型建议

| 类别            | 推荐                                          | 禁用/慎用                      |
| --------------- | --------------------------------------------- | ------------------------------ |
| **框架**        | `Vue 2/3`（稳定）、`React`（大型项目）        | 新兴小众框架（`Svelte/Solid`） |
| **构建工具**    | `Webpack`（生态成熟）、`Vite`（新项目）       | 未经验证的打包器               |
| **加密库**      | `crypto-js` + `jsencrypt` 或 `Web Crypto API` | 自研加密算法                   |
| **`UI` 组件库** | `Ant Design Vue / Element Plus`（企业级）     | 个人维护的 `UI` 库             |
| **状态管理**    | `Pinia / Vuex / Redux Toolkit`                | 全局变量滥用                   |

> ✅ **原则：稳定 > 新潮，可控 > 便捷**

# 九、 总结：金融前端开发的“铁律”

> **安全是底线，合规是红线，稳定是生命线。**

作为金融前端开发者，你不仅是“界面实现者”，更是 **用户资金安全的第一道防线**。每一行代码都可能影响千万用户的财产安全。

## 金融前端 vs 普通前端的核心差异

| 维度           | 普通互联网前端     | 金融前端                     |
| -------------- | ------------------ | ---------------------------- |
| **目标**       | 快速迭代、用户体验 | **安全第一、稳定至上**       |
| **风险容忍度** | 可接受小 bug       | **零容忍资金/合规风险**      |
| **技术重心**   | 新框架、炫酷交互   | **加密、防攻击、审计、合规** |
| **开发节奏**   | 敏捷、快速试错     | **谨慎、流程驱动、文档完备** |
| **角色定位**   | 产品实现者         | **安全守门人 + 合规执行者**  |

## 行动清单：

-  敏感数据传输必加密
-  所有外部内容必净化
-  关键操作必二次确认
-  生产环境必移除调试代码
-  用户授权必明确告知
-  操作日志必可追溯