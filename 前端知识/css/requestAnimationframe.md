#### ä¸€ã€å‰è¨€ ####

- å®ç°åŠ¨ç”»æ•ˆæœçš„æ–¹æ³•æ¯”è¾ƒå¤šï¼ŒJavascript ä¸­å¯ä»¥é€šè¿‡å®šæ—¶å™¨ setTimeout æ¥å®ç°ï¼ŒCSS3 ä¸­å¯ä»¥ä½¿ç”¨ transition å’Œ animation æ¥å®ç°ï¼ŒHTML5 ä¸­çš„ canvas ä¹Ÿå¯ä»¥å®ç°ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒHTML5 æä¾›ä¸€ä¸ªä¸“é—¨ç”¨äºè¯·æ±‚åŠ¨ç”»çš„APIï¼Œé‚£å°±æ˜¯ requestAnimationFrameï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è¯·æ±‚åŠ¨ç”»å¸§ã€‚

#### äºŒã€window.requestAnimationFrame()æ˜¯ä»€ä¹ˆï¼Ÿ ####

- å‘Šè¯‰æµè§ˆå™¨â€”â€”ä½ å¸Œæœ›æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»ï¼Œå¹¶ä¸”è¦æ±‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°æ›´æ–°åŠ¨ç”»ã€‚è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ‰§è¡Œã€‚
- æˆ‘ä»¬å…ˆåˆæ­¥è®¤è¯†ä¸€ä¸‹å®ƒï¼Œæ ¹æ®æ–‡æ¡£ã€‚æˆ‘ä»¬ç»™å®ƒä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•° test ã€‚

		   let test = document.querySelector('#test')
		   let i=100
		   function animation(){
		     test.style.marginLeft = i+'px'
		   }
		
		   window.requestAnimationFrame(animation)
	
  	     å¯ä»¥çœ‹åˆ°ï¼Œdivå‘å³ç§»åŠ¨äº†100px

- ä½†æ˜¯å®ƒåªæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œæ€ä¹ˆåšåŠ¨ç”»å‘¢ï¼Ÿåˆ«æ€¥ï¼Œå†çœ‹çœ‹ MDN æ€ä¹ˆè¯´ã€‚
- æ³¨æ„ï¼šè‹¥ä½ æƒ³åœ¨æµè§ˆå™¨ä¸‹æ¬¡é‡ç»˜ä¹‹å‰ç»§ç»­æ›´æ–°ä¸‹ä¸€å¸§åŠ¨ç”»ï¼Œé‚£ä¹ˆå›è°ƒå‡½æ•°è‡ªèº«å¿…é¡»å†æ¬¡è°ƒç”¨window.requestAnimationFrame()

		   let test = document.querySelector('#test')
		   let i=0
		   function animation(){
	
		     test.style.marginLeft = i+'px'
		     i++
		     window.requestAnimationFrame(animation)
		   }
		
		   window.requestAnimationFrame(animation)
	
  	     è¿™ä¸ªdivä¼šä¸€ç›´ç§»åŠ¨ä¸‹å»

#### ä¸‰ã€æ‰§è¡Œé¢‘ç‡ ####

- è¿™æ—¶å€™æœ‰å°ä¼™ä¼´å°±è¦é—®äº†ï¼Œæˆ‘æ²¡æœ‰åƒ setTimeout å’Œ setInterval é‚£æ ·è®¾ç½®æ—¶é—´ï¼Œå®ƒä¸ºä»€ä¹ˆä¼šé—´éš”æ‰§è¡Œå‘¢ï¼Ÿ
- å®ƒæ ¹æœ¬å°±ä¸ç”¨æ‰‹åŠ¨è®¾ç½®æ‰§è¡Œé—´éš”æ—¶é—´ï¼Œè€Œæ˜¯æ ¹æ®æµè§ˆå™¨å±å¹•åˆ·æ–°æ¬¡æ•°è‡ªåŠ¨è°ƒæ•´äº†,ä¹Ÿå°±æ˜¯è¯´æµè§ˆå™¨å±å¹•åˆ·æ–°å¤šå°‘æ¬¡ï¼Œå®ƒå°±æ‰§è¡Œå¤šå°‘æ¬¡ã€‚
- å±å¹•åˆ·æ–°é¢‘ç‡ï¼ˆæ¬¡æ•°ï¼‰ï¼š å±å¹•æ¯ç§’å‡ºç°å›¾åƒçš„æ¬¡æ•°ã€‚æ™®é€šç¬”è®°æœ¬ä¸º60Hzï¼Œä¹Ÿå°±æ˜¯ 1s å¤§çº¦æ‰§è¡Œ 60 æ¬¡ï¼Œç„¶åæ¯æ‰§è¡Œä¸€æ¬¡å¤§çº¦æ˜¯ 16.6msã€‚

#### å››ã€å›è°ƒå‚æ•° ####

- å›è°ƒå‡½æ•°ä¼šæœ‰ä¸€ä¸ªå‚æ•°æŒ‡ç¤ºå½“å‰è¢« requestAnimationFrame() æ’åºçš„å›è°ƒå‡½æ•°è¢«è§¦å‘çš„æ—¶é—´ã€‚

		   let test = document.querySelector('#test')
		   let i=0
		   function animation(time){
		     if(i>300){
		       return
		     }
		     console.log(time)
		     test.style.marginLeft = i+'px'
		     i++
		     window.requestAnimationFrame(animation)
		   }
		
		   window.requestAnimationFrame(animation)

- åœ¨åŒä¸€ä¸ªå¸§ä¸­çš„ å¤šä¸ªå›è°ƒå‡½æ•° ï¼Œå®ƒä»¬æ¯ä¸€ä¸ªéƒ½ä¼šæ¥å—åˆ°ä¸€ä¸ª ç›¸åŒçš„æ—¶é—´æˆ³

   ```
   (() => {
   	  function test1(timestamp) {
   	    console.log(`ğŸš€ğŸš€hello ~ requestAnimationFrame1 ${timestamp}`);
   	    requestAnimationFrame(test1)
   	  }
   	  function test2(timestamp) {
   	    console.log(`ğŸš€ğŸš€hello ~ requestAnimationFrame2 ${timestamp}`);
   	    requestAnimationFrame(test2)
   	  }
   	  requestAnimationFrame(test1)
   	  requestAnimationFrame(test2)
   	
   
   })()
   ```

   

- å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ª requestAnimationFrame åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¶é—´æˆ³æ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿå°±æ˜¯æµè§ˆå™¨åˆ·æ–°ä¸€æ¬¡çš„æ—¶å€™ï¼Œæ‰§è¡Œæ‰€æœ‰çš„ requestAnimationFrame ï¼Œå¹¶ä¸”å®ƒä»¬çš„å›è°ƒå‚æ•°æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚

#### äº”ã€æµè§ˆå™¨çš„è‡ªæˆ‘æ‹¯æ•‘ ####

- ä¸ºäº†æé«˜æ€§èƒ½å’Œç”µæ± å¯¿å‘½ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æµè§ˆå™¨é‡Œï¼Œå½“requestAnimationFrame()Â è¿è¡Œåœ¨åå°æ ‡ç­¾é¡µæˆ–è€…éšè—çš„`<iframe>Â `é‡Œæ—¶ï¼ŒrequestAnimationFrame()Â ä¼šè¢«æš‚åœè°ƒç”¨ä»¥æå‡æ€§èƒ½å’Œç”µæ± å¯¿å‘½ã€‚
- è¿™ä¸ªå°±å‰å®³äº†ï¼Œä½ è¦æ˜¯å½“æ—¶æ²¡æœ‰æµè§ˆé¡µé¢ï¼Œå¹¶ä¸”ä¹Ÿæ²¡å…³æ‰ï¼Œé‚£ä¹ˆ requestAnimationFrame() ä¸€ç›´åœ¨è¿™è·‘ï¼Œå¤šæ¶ˆè€—æ€§èƒ½å•Šã€‚

		   let test = document.querySelector('#test')
		   let i=0
		   function animation(){
		     if(i>300){
		       return
		     }
		     test.style.marginLeft = i+'px'
		     console.log(i)
		     i++
		     window.requestAnimationFrame(animation)
		   }
		
		   window.requestAnimationFrame(animation)


- å¯ä»¥çœ‹åˆ°ï¼Œæ§åˆ¶å°æ‰“å°iï¼Œæˆ‘åˆ‡åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œå‡ ç§’é’Ÿåæˆ‘åˆ‡å›æ¥çš„æ—¶å€™ï¼Œä¾ç„¶æ˜¯æ¥ç€åˆšæ‰çš„ä½ç½®è¿›è¡Œè¾“å‡ºã€‚

#### å…­ã€è¿”å›å€¼ ####

- requestAnimationFrame ä¼šè¿”å›ä¸€ä¸ªè¯·æ±‚ IDï¼Œæ˜¯å›è°ƒå‡½æ•°åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå”¯ä¸€å€¼ï¼Œå¯ä»¥ä½¿ç”¨ cancelAnimationFrame é€šè¿‡ä¼ å…¥è¯¥è¯·æ±‚ ID å–æ¶ˆå›è°ƒå‡½æ•°ã€‚

		   let test = document.querySelector('#test')
		   let i=0
		   let requestId = null
		   function animation(){
		     test.style.marginLeft = i+'px'
		     console.log(i)
		     i++
		     requestId = window.requestAnimationFrame(animation)
		     if(i>300){
		      cancelAnimationFrame(requestId);
		     }
		   }
		
		   animation()

#### ä¸ƒã€ä¼˜åŠ¿ ####

- requestAnimationFrameé‡‡ç”¨ç³»ç»Ÿæ—¶é—´é—´éš”ï¼Œä¿æŒæœ€ä½³ç»˜åˆ¶æ•ˆç‡ã€‚ä¸ä¼šå› ä¸ºé—´éš”æ—¶é—´è¿‡çŸ­ï¼Œé€ æˆè¿‡åº¦ç»˜åˆ¶ï¼Œå¢åŠ å¼€é”€ï¼›ä¹Ÿä¸ä¼šå› ä¸ºé—´éš”æ—¶é—´è¿‡é•¿ï¼Œä½¿åŠ¨ç”»å¡é¡¿ã€‚
- ä»å®ç°çš„åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ä¸Šï¼ŒrequestAnimationFrameä¸å®šæ—¶å™¨setTimeoutéƒ½ç›¸ä¼¼ï¼Œæ‰€ä»¥è¯´å…¶ä¼˜åŠ¿æ˜¯åŒsetTimeoutå®ç°çš„åŠ¨ç”»ç›¸æ¯”ã€‚

1. æå‡æ€§èƒ½ï¼Œé˜²æ­¢æ‰å¸§

- æµè§ˆå™¨ UI çº¿ç¨‹ï¼šæµè§ˆå™¨è®©æ‰§è¡Œ JavaScript å’Œæ›´æ–°ç”¨æˆ·ç•Œé¢ï¼ˆåŒ…æ‹¬é‡ç»˜å’Œå›æµï¼‰å…±ç”¨åŒä¸€ä¸ªå•çº¿ç¨‹ï¼Œç§°ä¸ºâ€œæµè§ˆå™¨ UI çº¿ç¨‹â€
- æµè§ˆå™¨ UI çº¿ç¨‹çš„å·¥ä½œåŸºäºä¸€ä¸ªç®€å•çš„é˜Ÿåˆ—ç³»ç»Ÿï¼Œä»»åŠ¡ä¼šè¢«ä¿å­˜åˆ°é˜Ÿåˆ—ä¸­ç›´åˆ°è¿›ç¨‹ç©ºé—²ã€‚ä¸€æ—¦ç©ºé—²ï¼Œé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªä»»åŠ¡å°±è¢«é‡æ–°æå–å‡ºæ¥å¹¶è¿è¡Œã€‚è¿™äº›ä»»åŠ¡è¦ä¹ˆæ˜¯è¿è¡Œ JavaScript ä»£ç ï¼Œè¦ä¹ˆæ‰§è¡Œ UI æ›´æ–°ã€‚

- é€šè¿‡setTimeoutå®ç°åŠ¨ç”»

   - setTimeouté€šè¿‡è®¾ç½®ä¸€ä¸ªé—´éš”æ—¶é—´ä¸æ–­æ”¹å˜å›¾åƒï¼Œè¾¾åˆ°åŠ¨ç”»æ•ˆæœã€‚è¯¥æ–¹æ³•åœ¨ä¸€äº›ä½ç«¯æœºä¸Šä¼šå‡ºç°å¡é¡¿ã€æŠ–åŠ¨ç°è±¡ã€‚è¿™ç§ç°è±¡ä¸€èˆ¬æœ‰ä¸¤ä¸ªåŸå› ï¼š
     - setTimeoutçš„æ‰§è¡Œæ—¶é—´å¹¶ä¸æ˜¯ç¡®å®šçš„ã€‚

        - åœ¨ JavaScript ä¸­ï¼ŒsetTimeoutä»»åŠ¡è¢«æ”¾è¿›å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼Œåªæœ‰å½“ä¸»çº¿ç¨‹ä¸Šçš„ä»»åŠ¡æ‰§è¡Œå®Œä»¥åï¼Œæ‰ä¼šå»æ£€æŸ¥è¯¥é˜Ÿåˆ—çš„ä»»åŠ¡æ˜¯å¦éœ€è¦å¼€å§‹æ‰§è¡Œã€‚æ‰€ä»¥ï¼ŒsetTimeoutçš„å®é™…æ‰§è¡Œæ—¶é—´ä¸€èˆ¬æ¯”å…¶è®¾å®šçš„æ—¶é—´æ™šä¸€äº›ã€‚è¿™ç§è¿è¡Œæœºåˆ¶å†³å®šäº†æ—¶é—´é—´éš”å‚æ•°å®é™…ä¸Šåªæ˜¯æŒ‡å®šäº†æŠŠåŠ¨ç”»ä»£ç æ·»åŠ åˆ°ã€æµè§ˆå™¨ UI çº¿ç¨‹é˜Ÿåˆ—ã€‘ä¸­ä»¥ç­‰å¾…æ‰§è¡Œçš„æ—¶é—´ã€‚å¦‚æœé˜Ÿåˆ—å‰é¢å·²ç»åŠ å…¥äº†å…¶ä»–ä»»åŠ¡ï¼Œé‚£åŠ¨ç”»ä»£ç å°±è¦ç­‰å‰é¢çš„ä»»åŠ¡å®Œæˆåå†æ‰§è¡Œ
        
			```
			- - - let startTime = performance.now();
			      setTimeout(() => {
			        let endTime = performance.now();
			        console.log(endTime - startTime);
			      }, 50);
			      /* ä¸€ä¸ªéå¸¸è€—æ—¶çš„ä»»åŠ¡ */
			      for (let i = 0; i < 20000; i++) {
			        console.log(0);
			      }
			
			
			```
			
			


 - åˆ·æ–°é¢‘ç‡å—å±å¹•åˆ†è¾¨ç‡å’Œå±å¹•å°ºå¯¸å½±å“ï¼Œä¸åŒè®¾å¤‡çš„å±å¹•åˆ·æ–°ç‡å¯èƒ½ä¸åŒï¼ŒsetTimeoutåªèƒ½è®¾ç½®å›ºå®šçš„æ—¶é—´é—´éš”ï¼Œè¿™ä¸ªæ—¶é—´å’Œå±å¹•åˆ·æ–°é—´éš”å¯èƒ½ä¸åŒ
 - ä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½ä¼šå¯¼è‡´setTimeoutçš„æ‰§è¡Œæ­¥è°ƒå’Œå±å¹•çš„åˆ·æ–°æ­¥è°ƒä¸ä¸€è‡´ï¼Œä»è€Œå¼•èµ·ä¸¢å¸§ç°è±¡ã€‚
 - setTimeoutçš„æ‰§è¡Œåªæ˜¯åœ¨å†…å­˜ä¸­å¯¹å›¾åƒå±æ€§è¿›è¡Œæ”¹å˜ï¼Œè¿™ä¸ªæ”¹å˜å¿…é¡»è¦ç­‰åˆ°ä¸‹æ¬¡æµè§ˆå™¨é‡ç»˜æ—¶æ‰ä¼šè¢«æ›´æ–°åˆ°å±å¹•ä¸Šã€‚å¦‚æœå’Œå±å¹•åˆ·æ–°æ­¥è°ƒä¸ä¸€è‡´ï¼Œå°±å¯èƒ½å¯¼è‡´ä¸­é—´æŸäº›å¸§çš„æ“ä½œè¢«è·¨è¶Šè¿‡å»ï¼Œç›´æ¥æ›´æ–°ä¸‹ä¸‹ä¸€å¸§çš„å›¾åƒã€‚
   
    - å‡å¦‚ä½¿ç”¨å®šæ—¶å™¨è®¾ç½®é—´éš” 10ms æ‰§è¡Œä¸€ä¸ªå¸§ï¼Œè€Œæµè§ˆå™¨åˆ·æ–°é—´éš”æ˜¯ 16.6msï¼ˆå³ 60FPSï¼‰
    - åœ¨ 20ms æ—¶ï¼ŒsetTimeoutè°ƒç”¨å›è°ƒå‡½æ•°åœ¨å†…å­˜ä¸­å°†å›¾åƒçš„å±æ€§è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†æ˜¯æ­¤æ—¶æµè§ˆå™¨ä¸‹æ¬¡åˆ·æ–°æ˜¯åœ¨ 33.2ms çš„æ—¶å€™ï¼Œæ‰€ä»¥ 20ms ä¿®æ”¹çš„å›¾åƒæ²¡æœ‰æ›´æ–°åˆ°å±å¹•ä¸Šã€‚
è€Œåˆ°äº† 30ms çš„æ—¶å€™ï¼ŒsetTimeoutåˆä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°å¹¶æ”¹å˜äº†å†…å­˜ä¸­å›¾åƒçš„å±æ€§ï¼Œä¹‹åæµè§ˆå™¨å°±åˆ·æ–°äº†ï¼Œ20ms æ›´æ–°çš„çŠ¶æ€è¢« 30ms çš„å›¾åƒè¦†ç›–äº†ï¼Œå±å¹•ä¸Šå±•ç¤ºçš„æ˜¯ 30ms æ—¶çš„å›¾åƒï¼Œæ‰€ä»¥ 20ms çš„è¿™ä¸€å¸§å°±ä¸¢å¤±äº†ã€‚ä¸¢å¤±çš„å¸§å¤šäº†ï¼Œç”»é¢å°±å¡é¡¿äº†ã€‚
ä½¿ç”¨ requestAnimationFrame æ‰§è¡ŒåŠ¨ç”»ï¼Œæœ€å¤§ä¼˜åŠ¿æ˜¯èƒ½ä¿è¯å›è°ƒå‡½æ•°åœ¨å±å¹•æ¯ä¸€æ¬¡åˆ·æ–°é—´éš”ä¸­åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±ä¸ä¼šå¼•èµ·ä¸¢å¸§ï¼ŒåŠ¨ç”»ä¹Ÿå°±ä¸ä¼šå¡é¡¿


2. èŠ‚çº¦èµ„æºï¼ŒèŠ‚çœç”µæº

- ä½¿ç”¨ setTimeout å®ç°çš„åŠ¨ç”»ï¼Œå½“é¡µé¢è¢«éšè—æˆ–æœ€å°åŒ–æ—¶ï¼Œå®šæ—¶å™¨setTimeoutä»åœ¨åå°æ‰§è¡ŒåŠ¨ç”»ä»»åŠ¡ï¼Œæ­¤æ—¶åˆ·æ–°åŠ¨ç”»æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ï¼ˆå®é™…ä¸Š FireFox/Chrome æµè§ˆå™¨å¯¹å®šæ—¶å™¨åšäº†ä¼˜åŒ–ï¼šé¡µé¢é—²ç½®æ—¶ï¼Œå¦‚æœæ—¶é—´é—´éš”å°äº 1000msï¼Œåˆ™åœæ­¢å®šæ—¶å™¨ï¼Œä¸requestAnimationFrameè¡Œä¸ºç±»ä¼¼ã€‚å¦‚æœæ—¶é—´é—´éš”>=1000msï¼Œå®šæ—¶å™¨ä¾ç„¶åœ¨åå°æ‰§è¡Œï¼‰

		```
	// å½“å¼€å§‹è¾“å‡ºcountåï¼Œåˆ‡æ¢æµè§ˆå™¨tabé¡µï¼Œå†åˆ‡æ¢å›æ¥ï¼Œå¯ä»¥å‘ç°æ‰“å°çš„å€¼æ²¡æœ‰åœæ­¢ï¼Œç”šè‡³å¯èƒ½å·²ç»æ‰§è¡Œå®Œäº†
		let count = 0;
		let timer = setInterval(() => {
		  if (count < 20) {
		    count++;
		    console.log(count);
		  } else {
		    clearInterval(timer);
		    timer = null;
		  }
		}, 2000);
	```
	
	


- ä½¿ç”¨requestAnimationFrameï¼Œå½“é¡µé¢å¤„äºæœªæ¿€æ´»çš„çŠ¶æ€ä¸‹ï¼Œè¯¥é¡µé¢çš„å±å¹•åˆ·æ–°ä»»åŠ¡ä¼šè¢«ç³»ç»Ÿæš‚åœï¼Œç”±äºrequestAnimationFrameä¿æŒå’Œå±å¹•åˆ·æ–°åŒæ­¥æ‰§è¡Œï¼Œæ‰€ä»¥ä¹Ÿä¼šè¢«æš‚åœã€‚å½“é¡µé¢è¢«æ¿€æ´»æ—¶ï¼ŒåŠ¨ç”»ä»ä¸Šæ¬¡åœç•™çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼ŒèŠ‚çº¦ CPU å¼€é”€ã€‚

		// å½“å¼€å§‹è¾“å‡ºcountåï¼Œåˆ‡æ¢æµè§ˆå™¨tabé¡µï¼Œå†åˆ‡æ¢å›æ¥ï¼Œå¯ä»¥å‘ç°æ‰“å°çš„å€¼ä»ç¦»å¼€å‰çš„å€¼ç»§ç»­è¾“å‡º
		let count = 0;
		function requestAnimation() {
		  if (count < 500) {
		    count++;
		    console.log(count);
		    requestAnimationFrame(requestAnimation);
		  }
		}
		requestAnimationFrame(requestAnimation);



3. å‡½æ•°èŠ‚æµ

- ä¸€ä¸ªåˆ·æ–°é—´éš”å†…å‡½æ•°æ‰§è¡Œå¤šæ¬¡æ—¶æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæ˜¾ç¤ºå™¨æ¯ 16.7ms åˆ·æ–°ä¸€æ¬¡ï¼Œå¤šæ¬¡ç»˜åˆ¶å¹¶ä¸ä¼šåœ¨å±å¹•ä¸Šä½“ç°å‡ºæ¥
- åœ¨é«˜é¢‘äº‹ä»¶ï¼ˆresizeï¼Œscrollç­‰ï¼‰ä¸­ï¼Œä½¿ç”¨requestAnimationFrameå¯ä»¥é˜²æ­¢åœ¨ä¸€ä¸ªåˆ·æ–°é—´éš”å†…å‘ç”Ÿå¤šæ¬¡å‡½æ•°æ‰§è¡Œï¼Œè¿™æ ·ä¿è¯äº†æµç•…æ€§ï¼Œä¹ŸèŠ‚çœäº†å‡½æ•°æ‰§è¡Œçš„å¼€é”€
- æŸäº›æƒ…å†µä¸‹å¯ä»¥ç›´æ¥ä½¿ç”¨requestAnimationFrameæ›¿ä»£ Throttle å‡½æ•°ï¼Œéƒ½æ˜¯é™åˆ¶å›è°ƒå‡½æ•°æ‰§è¡Œçš„é¢‘ç‡

4. å‡å°‘DOMæ“ä½œ

- requestAnimationFrame ä¼šæŠŠæ¯ä¸€å¸§ä¸­çš„æ‰€æœ‰DOMæ“ä½œé›†ä¸­èµ·æ¥ï¼Œåœ¨ä¸€æ¬¡é‡ç»˜æˆ–å›æµä¸­å°±å®Œæˆï¼Œå¹¶ä¸”é‡ç»˜æˆ–å›æµçš„æ—¶é—´é—´éš”ç´§ç´§è·Ÿéšæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé¢‘ç‡ä¸ºæ¯ç§’60å¸§ã€‚
